webpackJsonp([109],{j6SJ:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Toolbar",{attrs:{slot:"toolbar",judul:t.judul},slot:"toolbar"},[e("RefreshButton",{on:{onRefresh:function(a){t.onRefresh()}}}),t._v(" "),e("a",{staticClass:"btn btn-sm btn-outline-primary mr-2",attrs:{href:"#",onclick:"return false;"},on:{click:function(a){t.onDisplayTanggal()}}},[e("i",{staticClass:"fe fe-calendar"}),t._v(" "+t._s(t.query_tanggal?"Sembunyikan Tanggal":"Tampilkan Tanggal")+"\n        ")]),t._v(" "),e("a",{staticClass:"btn btn-sm btn-outline-primary mr-2",attrs:{href:"#",onclick:"return false;"},on:{click:function(a){t.onAddRAB()}}},[e("i",{staticClass:"fe fe-plus"}),t._v(" Tambah RAB\n        ")]),t._v(" "),e("a",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:function(a){t.jump({name:"lampiran-spk"})}}},[e("i",{staticClass:"fe fe-corner-up-left"}),t._v(" Kembali\n        ")])],1),t._v(" "),t.$root.error.status?e("div",{staticClass:"alert alert-icon alert-danger",attrs:{role:"alert"}},[e("i",{staticClass:"fe fe-info mr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$root.error.message)+"\n    ")]):t._e(),t._v(" "),t.$root.request?e("div",{staticClass:"alert bg-primary alert-success text-center",attrs:{role:"alert"}},[e("loader-spinner",{tag:"components",staticStyle:{zoom:"0.75"}})],1):t._e(),t._v(" "),e("TableView",{attrs:{items:t.get_detail,theads:t.theads}},[e("template",{slot:"thead"},[e("tr",{staticClass:"bg-primary"},[e("th",{staticClass:"align-middle text-light",attrs:{width:"30"}},[t._v("No")]),t._v(" "),t.query_tanggal?e("th",{staticClass:"align-middle text-light",attrs:{width:"120"}},[t._v("Tanggal")]):t._e(),t._v(" "),e("th",{staticClass:"align-middle text-light"},[t._v("Uraian")]),t._v(" "),e("th",{staticClass:"align-middle text-light",attrs:{width:"80"}},[t._v("Volume")]),t._v(" "),e("th",{staticClass:"align-middle text-light",attrs:{width:"120"}},[t._v("Satuan")]),t._v(" "),e("th",{staticClass:"align-middle text-light",attrs:{width:"120"}},[t._v("Harga")]),t._v(" "),e("th",{staticClass:"align-middle text-light",attrs:{width:"160"}},[t._v("Total")]),t._v(" "),e("th",{staticClass:"align-middle text-light",attrs:{width:"50"}},[t._v("Aksi")])])]),t._v(" "),e("tbody",{attrs:{slot:"tbody"},slot:"tbody"},t._l(t.get_detail,function(a,i){return e("tr",{key:i,attrs:{id:"rab["+a.id+"]"}},[e("td",{staticClass:"align-middle text-center"},[t._v(t._s(i+1))]),t._v(" "),t.query_tanggal&&t.listDate.length>0?e("td",{directives:[{name:"null-info",rawName:"v-null-info",value:a.tanggal,expression:"item.tanggal"}],staticClass:"align-middle"},[e("datetime",{attrs:{id:"tanggal["+a.id+"]","input-class":"form-control",name:"tanggal["+a.id+"]",type:"date",format:"yyyy-MM-dd","value-zone":"Asia/Makassar",zone:"Asia/Makassar"},model:{value:t.listDate[i].tanggal,callback:function(a){t.$set(t.listDate[i],"tanggal",a)},expression:"listDate[index].tanggal"}})],1):t._e(),t._v(" "),e("td",{directives:[{name:"null-info",rawName:"v-null-info",value:a.uraian,expression:"item.uraian"}],staticClass:"align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:a.uraian,expression:"item.uraian",modifiers:{trim:!0}}],staticClass:"form-control form-control-sm",attrs:{type:"text",name:"uraian["+a.id+"]",id:"uraian["+a.id+"]"},domProps:{value:a.uraian},on:{input:function(e){e.target.composing||t.$set(a,"uraian",e.target.value.trim())},blur:function(a){t.$forceUpdate()}}})]),t._v(" "),e("td",{directives:[{name:"nan-info",rawName:"v-nan-info",value:a.volume,expression:"item.volume"}],staticClass:"align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:a.volume,expression:"item.volume",modifiers:{trim:!0,number:!0}}],staticClass:"form-control form-control-sm text-center volume",attrs:{type:"number",name:"volume["+a.id+"]",id:"volume["+a.id+"]"},domProps:{value:a.volume},on:{blur:[function(a){t.onFilterNumberAndDecimal({event:a,index:i,item:"volume"})},function(a){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(a,"volume",t._n(e.target.value.trim()))}}})]),t._v(" "),e("td",{directives:[{name:"null-info",rawName:"v-null-info",value:a.satuan,expression:"item.satuan"}],staticClass:"align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:a.satuan,expression:"item.satuan",modifiers:{trim:!0}}],staticClass:"form-control form-control-sm text-center satuan",attrs:{type:"text",name:"satuan["+a.id+"]",id:"satuan["+a.id+"]"},domProps:{value:a.satuan},on:{input:function(e){e.target.composing||t.$set(a,"satuan",e.target.value.trim())},blur:function(a){t.$forceUpdate()}}})]),t._v(" "),e("td",{directives:[{name:"nan-info",rawName:"v-nan-info",value:a.harga,expression:"item.harga"}],staticClass:"align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:a.harga,expression:"item.harga",modifiers:{trim:!0,number:!0}}],staticClass:"form-control form-control-sm text-right harga",attrs:{type:"number",name:"harga["+a.id+"]",id:"harga["+a.id+"]"},domProps:{value:a.harga},on:{blur:[function(a){t.onFilterNumberAndDecimal({event:a,index:i,item:"harga"})},function(a){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(a,"harga",t._n(e.target.value.trim()))}}})]),t._v(" "),e("td",{staticClass:"align-middle"},[e("input",{staticClass:"form-control form-control-sm text-right jumlah",attrs:{type:"number",name:"jumlah["+a.id+"]",id:"jumlah["+a.id+"]",disabled:""},domProps:{value:t._f("rupiah2")(a.jumlah)}})]),t._v(" "),e("td",{staticClass:"text-center"},[e("a",{staticClass:"icon ml-2",on:{click:function(a){t.onDelete(i)}}},[e("i",{staticClass:"fe fe-trash-2 text-danger"})])])])})),t._v(" "),e("template",{slot:"tfoot"},[e("tr",{staticClass:"bg-light"},[e("th",{staticClass:"text-right",attrs:{colspan:t.query_tanggal?6:5}},[t._v("Subtotal :")]),t._v(" "),e("th",{staticClass:"text-right"},[t._v(t._s(t._f("rupiah2")(t.subtotal)))]),t._v(" "),e("th")]),t._v(" "),e("tr",{staticClass:"bg-light"},[e("th",{staticClass:"text-right",attrs:{colspan:t.query_tanggal?6:5}},[t._v("PPN :")]),t._v(" "),e("th",{staticClass:"text-right"},[t._v(t._s(t._f("rupiah2")(t.ppn)))]),t._v(" "),e("th")]),t._v(" "),e("tr",{staticClass:"bg-light"},[e("th",{staticClass:"text-right",attrs:{colspan:t.query_tanggal?6:5}},[t._v("Total :")]),t._v(" "),e("th",{staticClass:"text-right"},[t._v(t._s(t._f("rupiah2")(t.total)))]),t._v(" "),e("th")])])],2),t._v(" "),e("FormulirButton",{attrs:{slot:"button"},on:{onSubmit:function(a){t.onSubmit()}},slot:"button"})],1)},staticRenderFns:[]}},o8CP:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("NYxO"),n=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};function s(t){var a=0;return t.forEach(function(t){isNaN(t.volume)||isNaN(t.harga)||(a+=t.volume*t.harga)}),a}a.default={computed:n({},Object(i.mapGetters)({get_detail:"getters/lampiran/spk/detail",get_form:"getters/lampiran/spk/form"}),{query_tanggal:function(){return this.$route.query.tanggal}}),watch:{get_detail:{handler:function(t,a){for(var e=0,i=0;i<t.length;i++)isNaN(t[i].volume)||isNaN(t[i].harga)||(t[i].jumlah=t[i].volume*t[i].harga,e+=t[i].jumlah);this.subtotal=e,this.ppn=.1*e,this.total=this.subtotal-this.ppn},deep:!0}},methods:n({},Object(i.mapActions)({set_detail:"setters/api/lampiran/spk/detail"}),{onInitData:function(){var t=this;this.$root.error.status=!1,this.$root.error.message="",this.$root.request=!0;var a=this.get_form.id;return new Promise(function(e,i){axios.get("lampiran/spk/"+a+"/rab?tanggal=true").then(function(a){if(void 0==a)return e();a.data.data.detail.forEach(function(a){t.listDate.push({tanggal:a.tanggal,id:a.id})}),e(t.set_detail(a.data.data.detail))}).catch(function(t){i(t)})})},onRefresh:function(){this.onInitData()},onSubmit:function(){this.$root.error.status=!1,this.$root.error.message="",this.$root.request=!0;var t=this.get_form.id;console.log(this.listDate);var a={};this.listDate.forEach(function(t,e){a[t.id]=t.tanggal.split("T")[0]});var e={};this.get_detail.forEach(function(t,a){var i=document.getElementById("uraian["+t.id+"]").value;e[t.id]=i});var i={};this.get_detail.forEach(function(t,a){var e=document.getElementById("volume["+t.id+"]").value;i[t.id]=e});var n={};this.get_detail.forEach(function(t,a){var e=document.getElementById("satuan["+t.id+"]").value;n[t.id]=e});var s={};this.get_detail.forEach(function(t,a){var e=document.getElementById("harga["+t.id+"]").value;s[t.id]=e});var r={id:t,tanggal:a,uraian:e,volume:i,satuan:n,harga:s};new Promise(function(a,e){axios.put("lampiran/spk/"+t+"/rab",r).then(function(t){a(t)}).catch(function(t){e(t)})})},onDelete:function(t){this.get_detail.splice(t,1)},onDisplayTanggal:function(){var t;t=!this.$route.query.tanggal,this.jump({name:"lampiran-spk-rab",query:{tanggal:t}})},onAddRAB:function(){this.listDate.push({tanggal:this.TanggalHariIni(),id:Number(this.get_detail.length)+1}),this.get_detail.push({id:Number(this.get_detail.length)+1,spk_rab_id:this.get_form.id,tanggal:this.TanggalHariIni(),uraian:"",volume:0,satuan:"",harga:0,jumlah:0,created_at:"",updated_at:""})}}),mounted:function(){this.onInitData(),this.nominal=s(this.get_detail),this.subtotal=.1*s(this.get_detail),this.total=this.subtotal-this.ppn},data:function(){return{judul:"Data RAB SPK Nomor : "+this.$store.state.lampiran_spk.form.nomor_spk,user:"Super Admin",subtotal:0,ppn:0,total:0,listDate:[],theads:[{title:"No",width:"30"},{title:"Tanggal",width:"120"},{title:"Uraian",width:"80"},{title:"Volume",width:"120"},{title:"Satuan",width:"120"},{title:"Harga",width:"160"},{title:"Total",width:"50"},{title:"Aksi",width:"100"}]}}}},wjQ7:function(t,a,e){var i=e("VU/8")(e("o8CP"),e("j6SJ"),!1,null,null,null);t.exports=i.exports}});