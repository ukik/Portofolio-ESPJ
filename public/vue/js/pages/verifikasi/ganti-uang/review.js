webpackJsonp([51],{a8KJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("NYxO"),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};e.default={computed:i({},Object(n.mapGetters)({get_kegiatan:"getters/verifikasi/ganti-uang/kegiatan",get_form:"getters/verifikasi/ganti-uang/form",get_permohonan:"getters/verifikasi/ganti-uang/permohonan"})),methods:i({},Object(n.mapActions)({set_kegiatan:"setters/api/verifikasi/ganti-uang/kegiatan",set_form:"setters/non-api/verifikasi/ganti-uang/form"}),{onInitData:function(){var t=this;this.$root.error.status=!1,this.$root.error.message="",this.$root.request=!0;var e=this.get_form.id;return new Promise(function(a,n){axios.get("verifikasi/gu/"+e+"/review").then(function(e){if(void 0==e)return a();t.pageReady=!0,a(t.set_kegiatan(e.data.data.kegiatan))}).catch(function(t){n(t)})})},onRefresh:function(){this.onInitData()},onCancel:function(){this.$root.error.status=!1,this.$root.error.message="",this.$root.request=!0;var t=this.get_form.id;new Promise(function(e,a){axios.post("verifikasi/gu/"+t+"/reject").then(function(t){e(t)}).catch(function(t){a(t)})})},onUpdate:function(){var t=this;this.$root.error.status=!1,this.$root.error.message="",this.$root.request=!0;var e=this.get_form.id,a=this.verified_at;this.pageUpdate=!0;var n=document.getElementById("nominal_disetujui").value,i={id:e,nominal_disetujui:n,verified_at:a};new Promise(function(a,n){axios.post("verifikasi/gu/"+e+"/update",i).then(function(e){t.permohonan=[e.data.data.permohonan],t.pageUpdate=!1,a(e)}).catch(function(e){n(e),t.pageUpdate=!1})})},onConfirm:function(){this.$root.error.status=!1,this.$root.error.message="",this.$root.request=!0;var t=this.get_form.id,e=this.verified_at,a=document.getElementById("nominal_disetujui").value,n={id:t,verified_at:e,nominal_disetujui:a};new Promise(function(e,a){axios.post("verifikasi/gu/"+t+"/approve",n).then(function(t){e(t)}).catch(function(t){a(t)})})},onPicker:function(t){this[t.key]=t.value}}),mounted:function(){this.onInitData()},data:function(){return{verified_at:null,pageReady:!1,pageUpdate:!1,permohonan:[this.$store.state.verifikasi_ganti_uang.form],judul:"Daftar Permohonan",user:this.$root.level,theads:[{title:"No",width:"30"},{title:"Uraian",width:""},{title:"Diajukan(Rp)",width:"150"},{title:"Disetujui (Rp)",width:"150"}]}}}},aOLu:function(t,e,a){var n=a("VU/8")(a("a8KJ"),a("taVN"),!1,null,null,null);t.exports=n.exports},taVN:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Toolbar",{attrs:{slot:"title",judul:"Verifikasi Permohonan "+t.get_form.nomor_permohonan},slot:"title"},[a("RefreshButton",{on:{onRefresh:function(e){t.onRefresh()}}}),t._v(" "),a("ConfirmButton",{staticClass:"mr-2",on:{onConfirm:function(e){t.onConfirm()}}}),t._v(" "),a("CancelButton",{staticClass:"mr-2",on:{onCancel:function(e){t.onCancel()}}}),t._v(" "),a("BackButton")],1),t._v(" "),t.$root.error.status?a("div",{staticClass:"alert alert-icon alert-danger",attrs:{role:"alert"}},[a("i",{staticClass:"fe fe-info mr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$root.error.message)+"\n    ")]):t._e(),t._v(" "),t.$root.request?a("div",{staticClass:"alert bg-primary alert-success text-center",attrs:{role:"alert"}},[a("loader-spinner",{tag:"components",staticStyle:{zoom:"0.75"}})],1):t._e(),t._v(" "),t.pageReady?a("Formulir",{attrs:{column_content:"col-12"}},[a("FormulirInput",{attrs:{slot:"input",readonly:"true",title:"Kegiatan",name:"kegiatan",value:"["+t.get_kegiatan.kode_dpa+"] "+t.get_kegiatan.nama,placeholder:"Kegiatan"},slot:"input"}),t._v(" "),a("div",{staticClass:"form-group",attrs:{slot:"input"},slot:"input"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("FormulirInput",{attrs:{slot:"input",readonly:"true",title:"Nomor Permohonan",name:"nomor_spp",value:t.get_form.nomor_permohonan,placeholder:"Nomor Permohonan"},slot:"input"})],1),t._v(" "),a("div",{staticClass:"col"},[a("FormulirInput",{attrs:{slot:"input",readonly:"true",title:"PAGU",name:"nomor_spp",value:t._f("rupiah2")(t.get_kegiatan.pagu),placeholder:"PAGU"},slot:"input"})],1),t._v(" "),a("div",{staticClass:"col"},[a("FormulirPicker",{attrs:{slot:"input",type:"date",title:"Tanggal",name:"verified_at",placeholder:"Tanggal"},on:{onPicker:function(e){t.onPicker({key:"verified_at",value:e})}},slot:"input",model:{value:t.get_form.tanggal,callback:function(e){t.$set(t.get_form,"tanggal",e)},expression:"get_form.tanggal"}})],1)])])],1):t._e(),t._v(" "),t.pageReady&&!t.pageUpdate?a("TableView",{attrs:{items:t.permohonan,theads:t.theads},scopedSlots:t._u([{key:"default",fn:function(e){return[a("tr",[a("td",{staticClass:"text-center"},[t._v(t._s(e.index+1))]),t._v(" "),a("td",[t._v(t._s(e.item.kegiatan))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.item.nominal_diajukan))]),t._v(" "),a("td",{staticClass:"text-center has-input"},[a("input",{staticClass:"form-control form-control-sm text-right numeric",attrs:{type:"text","data-max":e.item.nominal_diajukan,name:"nominal_disetujui",id:"nominal_disetujui"},domProps:{value:e.item.nominal_disetujui}})])])]}}])}):t._e(),t._v(" "),a("FormulirButton",{on:{onSubmit:function(e){t.onUpdate()}}},[a("a",{attrs:{slot:"back"},slot:"back"}),t._v(" "),a("a",{staticClass:"btn btn-danger",attrs:{slot:"cancel",href:"#",onclick:"return false;"},on:{click:function(e){t.onCancel()}},slot:"cancel"},[a("i",{staticClass:"fe fe-x"}),t._v(" Tolak Permohonan\n        ")])])],1)},staticRenderFns:[]}}});