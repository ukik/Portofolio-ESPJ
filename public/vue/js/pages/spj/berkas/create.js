webpackJsonp([79],{"9Xuq":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("NYxO"),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t};e.default={computed:i({},Object(s.mapGetters)({get_listKodeRekening:"getters/spj/berkas/listKodeRekening",get_listJenis:"getters/spj/berkas/listJenis",get_form:"getters/spj/form"})),methods:i({},Object(s.mapActions)({set_create:"setters/api/spj/berkas/create"}),{onInitData:function(){var t=this;this.$root.error.status=!1,this.$root.error.message="",this.$root.request=!0;var e=this.get_form.id;return new Promise(function(n,s){axios.get("spj/"+e+"/berkas/create").then(function(e){if(void 0==e)return n();t.AutocompleteRekening(e.data.data.listKodeRekening),n(t.set_create(e.data.data))}).catch(function(t){s(t)})})},onRefresh:function(){this.items_rekening=[],this.selected_rekening=null,this.kode_rekening="",this.onInitData()},onSubmit:function(){this.$root.error.status=!1,this.$root.error.message="",this.$root.request=!0;var t=this.get_form.id,e=document.getElementById("deskripsi").value,n=document.getElementById("jenis").value,s=document.getElementById("file").files[0],i=this.kode_rekening,r=this.get_form.permohonan_id,o=this.get_form.permohonan_id,a=new FormData;a.append("id",t),a.append("permohonan_detail_id",o),a.append("deskripsi",e),a.append("jenis",n),a.append("file",s),a.append("kode_rekening",i),a.append("permohonan_id",r),a.append("permohonan_detail_id",o);new Promise(function(e,n){axios.post("spj/"+t+"/berkas/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e(t)}).catch(function(t){n(t)})})},AutocompleteRekening:function(t){var e=this;new Promise(function(n){t.forEach(function(t){var n=t;n.search=t.kode_rekening+" "+t.nama,e.items_rekening.push(n)}),n()}).then(function(t){e.pageReady=!0})},onSelectedItemRekening:function(t){this.kode_rekening=t.kode_rekening}}),mounted:function(){this.onInitData()},data:function(){return{pageReady:!1,items_rekening:[],selected_rekening:null,kode_rekening:""}}}},bA4k:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Toolbar",{attrs:{slot:"title",judul:"Upload Berkas SPJ"},slot:"title"},[n("RefreshButton",{on:{onRefresh:function(e){t.onRefresh()}}}),t._v(" "),n("BackButton")],1),t._v(" "),t.$root.error.status?n("div",{staticClass:"alert alert-icon alert-danger",attrs:{role:"alert"}},[n("i",{staticClass:"fe fe-info mr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$root.error.message)+"\n    ")]):t._e(),t._v(" "),t.$root.request?n("div",{staticClass:"alert bg-primary alert-success text-center",attrs:{role:"alert"}},[n("loader-spinner",{tag:"components",staticStyle:{zoom:"0.75"}})],1):t._e(),t._v(" "),n("div",{attrs:{slot:"pre-information"},slot:"pre-information"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"card"},[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-hover table-sm table-outline table-vcenter text-nowrap card-table"},[n("tr",[n("th",{attrs:{width:"200"}},[t._v("Tanggal")]),t._v(" "),n("td",{attrs:{width:"10"}},[t._v(":")]),t._v(" "),n("td",[t._v(t._s(t.get_form.tanggal?t.get_form.tanggal:"[Belum diajukan]"))])]),t._v(" "),n("tr",[n("th",[t._v("Nomor Permohonan")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",[t._v(t._s(t.get_form.permohonan.nomor_permohonan))])]),t._v(" "),n("tr",[n("th",[t._v("Kegiatan")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",[t._v("["+t._s(t.get_form.kode_dpa)+"] "+t._s(t.get_form.kegiatan))])]),t._v(" "),n("tr",[n("th",[t._v("Diajukan")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",[t._v(t._s(t._f("rupiah2")(t.get_form.nominal_diajukan)))])]),t._v(" "),n("tr",[n("th",[t._v("Disetujui")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",[t._v(t._s(t._f("rupiah2")(t.get_form.nominal_disetujui)))])]),t._v(" "),n("tr",[n("th",[t._v("Nominal SPJ")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",[t._v(t._s(t._f("rupiah2")(t.get_form.nominal_spj)))])]),t._v(" "),n("tr",[n("th",[t._v("Sisa SPJ")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",[t._v(t._s(t._f("rupiah2")(t.get_form.nominal_sisa)))])])])])])])])]),t._v(" "),n("Formulir",{attrs:{column_content:"col-12"}},[n("FormulirLegend",{attrs:{slot:"legend",title:"Upload Berkas"},slot:"legend"}),t._v(" "),t.pageReady?n("Autocomplete",{attrs:{slot:"input",selected:t.selected_rekening,items:t.items_rekening,title:"Kode Rincian (Rekening)"},on:{onSelectedItem:t.onSelectedItemRekening},slot:"input",scopedSlots:t._u([{key:"item",fn:function(e){return[t._v("\n                    [ "+t._s(e.result.kode_rekening)+" ]: "+t._s(e.result.nama)+"\n                ")]}},{key:"selection",fn:function(e){return[t._v("\n                    [ "+t._s(e.result.kode_rekening)+" ]: "+t._s(e.result.nama)+"\n                ")]}}])}):t._e(),t._v(" "),n("FormulirDropdown",{attrs:{slot:"input",title:"Jenis Berkas"},slot:"input"},[n("div",{staticClass:"input-group",attrs:{slot:"default"},slot:"default"},[n("select",{staticClass:"form-control custom-select submit-on-change",attrs:{name:"jenis",id:"jenis"}},[n("option",{attrs:{value:""}},[t._v("- Pilih Jenis Berkas -")]),t._v(" "),t._l(t.get_listJenis,function(e,s){return t.get_listJenis.length>0?n("option",{key:s,domProps:{value:e}},[t._v("\n                        "+t._s(e))]):t._e()})],2)])]),t._v(" "),n("FormulirFile",{attrs:{slot:"input",title:"File",name:"file",type:"file"},on:{onChange:function(e){t.$refs.file_label.innerText=e}},slot:"input"},[n("label",{ref:"file_label",staticClass:"custom-file-label",attrs:{slot:"append"},slot:"append"},[t._v("Pilih berkas")])]),t._v(" "),n("FormulirTextarea",{attrs:{slot:"input",title:"Deskripsi",name:"deskripsi",value:"",placeholder:"Deskripsi"},slot:"input"}),t._v(" "),n("FormulirButton",{attrs:{slot:"button"},on:{onSubmit:function(e){t.onSubmit()}},slot:"button"})],1)],1)},staticRenderFns:[]}},tdkY:function(t,e,n){var s=n("VU/8")(n("9Xuq"),n("bA4k"),!1,null,null,null);t.exports=s.exports}});